<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>注册</title>
	<link rel="stylesheet" type="text/css" href="/static/css/register-login.css">
	<link rel="stylesheet" type="text/css" href="/static/css/slide.css">
</head>
<body>
<div id="box"></div>
<div class="cent-box register-box">
	<div class="cent-box-header">
		<h2 class="sub-title">生活热爱分享</h2>
	</div>

	<div class="cont-main clearfix">
		<div class="index-tab">
			<div class="index-slide-nav">
				<a href="login.html">登录</a>
				<a href="register.html" class="active">注册</a>
				<div class="slide-bar slide-bar1"></div>				
			</div>
		</div>

		<div class="login form">
			<div class="group">
				<div class="group-ipt email">
					<input type="email" name="email" id="email" class="ipt" placeholder="邮箱地址" required>
				</div>
				<div class="group-ipt user">
					<input type="text" name="user" id="user" class="ipt" placeholder="昵称" required>
				</div>
				<div class="group-ipt password">
					<input type="password" name="password" id="password" class="ipt" placeholder="设置登录密码" required>
				</div>
				<div class="group-ipt password1">
					<input type="password" name="password1" id="password1" class="ipt" placeholder="确认密码" required>
				</div>
				<div class="group-ipt verify">
					<input type="text" name="verify" id="verify" class="ipt" placeholder="邮箱验证码" required>
					<div class="code_send" id="code_send">发送</div>
				</div>
			</div>
		</div>
		
		<div id="demo">
		<div id="slider">
        <div id="slider_bg">
		</div>
        <span id="label">&gt;&gt;</span> <span id="labelTip">拖动滑块验证</span>
		</div>
		</div>

		<div class="button">
			<button type="submit" class="login-btn register-btn" id="button">注册</button>
		</div>
	</div>
</div>

<div class="footer">
	<p> smartofme.club </p>
	<p></p>
</div>

<script src='/static/js/particles.js' type="text/javascript"></script>
<script src='/static/js/background.js' type="text/javascript"></script>
<script src='/static/js/jquery.min.js' type="text/javascript"></script>
<script src='/static/js/layer/layer.js' type="text/javascript"></script>
<script src='/static/js/slide.js' type="text/javascript"></script>
<script src="/static/js/code_send.js" type="text/javascript"></script>
<script>
	$(".login-btn").click(function(){
		var email = $("#email").val();
		var user = $("#user").val();
		var password = $("#password").val();
		var password1 = $("#password1").val();
		var verify = $("#verify").val();
		var reg = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
		isOK = reg.test(email);
		if(email == '')
		{
			$("#email").attr("placeholder","请输入邮箱");
			$("#email").addClass("invalid");
		}
		else if(!isOK){
			$("#email").val("");
			$("#email").attr("placeholder","邮箱格式不正确");
			$("#email").addClass("invalid");
		}
		else if(user == '')
		{
			$("#user").attr("placeholder","请输入昵称");
			$("#user").addClass("invalid");
		}
		else if(password == '')
		{
			$("#password").attr("placeholder","请输入密码");
			$("#password").addClass("invalid");
		}
		else if(password.length < 8)
		{
			$("#password").val("");
			$("#password").attr("placeholder","密码的长度应不少于8位");
			$("#password").addClass("invalid");
		}
		else if(password1 == '')
		{
			$("#password1").attr("placeholder","请确认密码");
			$("#password1").addClass("invalid");
		}
		else if(password != password1)
		{
			$("#password1").val("");
			$("#password1").attr("placeholder","两次密码不一致");
			$("#password1").addClass("invalid");
		}
		else if(verify == '')
		{
			$("#verify").attr("placeholder","请输入邮箱收到的验证码");
			$("#verify").addClass("invalid");
		}
		else if(verify.length != 6)
		{
			$("#verify").val("");
			$("#verify").attr("placeholder","邮箱验证码错误");
			$("#verify").addClass("invalid");
		}
		else
		{
			 var data ="username="+email+"&password="+password+"&nickname="+user+"&code="+verify;
			 $.ajax({
			 type: 'POST',
			 url: '/register',
			 data: data,
			 dataType: 'json',
			 success: function(data){
				if(data.message == 0)
				{
					$("#verify").val("");
					$("#verify").attr("placeholder","邮箱验证码已过期");
					$("#verify").addClass("invalid");
				}
				else if(data.message == 1)
				{
					$("#verify").val("");
					$("#verify").attr("placeholder","邮箱验证码错误");
					$("#verify").addClass("invalid");
				}
				else if(data.message == 2)
				{
					alert('注册失败，邮箱已注册');
				}
				else{
					alert("注册成功！");
				}
			 },
			 });
		}

});
	$("#remember-me").click(function(){
		var n = document.getElementById("remember-me").checked;
		if(n){
			$(".zt").show();
		}else{
			$(".zt").hide();
		}
	})
</script>
</body>
</html>